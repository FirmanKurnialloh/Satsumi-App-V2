<style>
  /* === STRUKTUR & LAYOUT KONTEN MENU === */
  .nav-item-content {
    display: flex;
    align-items: center;
  }
  
  /* Ruang tetap untuk ikon agar teks sejajar */
  .nav-item-content i.bi {
    width: 32px;
    text-align: left;
    font-size: 1.2rem;
  }

  .nav-item.has-child {
    justify-content: space-between;
  }

  /* === GAYA SUB-MENU (LEVEL 2) === */
  .submenu {
    display: none;
    flex-direction: column;
    margin-left: 14px; 
    padding-left: 10px;
    border-left: 2px solid var(--border); 
    background: rgba(0, 0, 0, 0.01);
  }

  .submenu.open {
    display: flex;
  }

  /* Animasi Panah Accordion */
  .arrow {
    transition: transform 0.3s ease;
    font-size: 0.85rem;
    opacity: 0.6;
  }
  .arrow.rotate {
    transform: rotate(180deg);
  }

  /* Penyesuaian Nav Item agar lebih tegas */
  .nav-item {
    margin-bottom: 4px;
    transition: all 0.2s ease;
  }
</style>

<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <div style="display: flex; align-items: center; gap: 12px;">
      <div class="sidebar-logo">S</div>
      <div class="sidebar-title">Satsumi Admin</div>
    </div>
    <i class="bi bi-x-lg sidebar-close-btn" onclick="toggleSidebar()"></i>
  </div>
  
  <nav style="display: flex; flex-direction: column; flex: 1; overflow-y: auto; padding-right: 5px;">
    <div class="nav-item active" onclick="navTo('dashboard')" id="nav-dashboard">
      <div class="nav-item-content">
        <i class="bi bi-grid-fill"></i>
        <span>Dashboard</span>
      </div>
    </div>
    
    <div class="nav-item" onclick="navTo('users')" id="nav-users">
      <div class="nav-item-content">
        <i class="bi bi-people-fill"></i>
        <span>Manajemen User</span>
      </div>
    </div>

    <div class="nav-group">
      <div class="nav-item has-child" onclick="toggleSubmenu('sub-presensi', 'arrow-presensi')">
        <div class="nav-item-content">
          <i class="bi bi-calendar-check-fill"></i>
          <span>Presensi</span>
        </div>
        <i class="bi bi-chevron-down arrow" id="arrow-presensi"></i>
      </div>
      
      <div class="submenu" id="sub-presensi">
        <div class="nav-item" onclick="navTo('presensi-harian-rekap')" id="nav-presensi-harian-rekap" style="font-size: 0.9rem;">
          <div class="nav-item-content">
            <i class="bi bi-dot" style="font-size: 1.5rem;"></i>
            <span>Presensi Harian</span>
          </div>
        </div>

        <div class="nav-item" onclick="navTo('presensi-kegiatan-rekap')" id="nav-presensi-kegiatan-rekap" style="font-size: 0.9rem;">
          <div class="nav-item-content">
            <i class="bi bi-dot" style="font-size: 1.5rem;"></i>
            <span>Presensi Kegiatan</span>
          </div>
        </div>
      </div>
    </div>

    <div class="nav-item" onclick="navTo('settings')" id="nav-settings">
      <div class="nav-item-content">
        <i class="bi bi-gear-fill"></i>
        <span>Pengaturan</span>
      </div>
    </div>
  </nav>

  <div style="margin-top: auto; padding-top: 15px; border-top: 1px solid var(--border);">
    <div class="nav-item" onclick="logout()" style="color: var(--danger);">
      <div class="nav-item-content">
        <i class="bi bi-box-arrow-right"></i>
        <span>Keluar</span>
      </div>
    </div>
  </div>
</aside>

<div id="sidebar-overlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

<script>
  /**
   * Fungsi toggle submenu dengan animasi rotasi panah
   */
  function toggleSubmenu(submenuId, arrowId) {
    const submenu = document.getElementById(submenuId);
    const arrow = document.getElementById(arrowId);
    
    if (submenu) {
      const isOpen = submenu.classList.contains('open');
      
      // Tutup semua submenu lain jika ingin mode accordion tunggal (opsional)
      // document.querySelectorAll('.submenu').forEach(s => s.classList.remove('open'));
      // document.querySelectorAll('.arrow').forEach(a => a.classList.remove('rotate'));

      if (isOpen) {
        submenu.classList.remove('open');
        arrow.classList.remove('rotate');
      } else {
        submenu.classList.add('open');
        arrow.classList.add('rotate');
      }
    }
  }
</script>